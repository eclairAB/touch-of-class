import{X as b,j as l,aP as S,ah as Y,aQ as $,am as H,bt as K,bu as U,Y as Z,ap as _,$ as ee,aR as te,a2 as ae,z as i,bj as re,aJ as oe}from"./CxCi84D5.js";import{r as se,s as ne,m as ue,o as ie,q as le,a as me,b as de,p as ce,d as ge,t as pe,u as ve,e as Pe,v as Ie,f as fe,g as ye,h as Se}from"./DllL5wLp.js";const be=b({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function he(e,a){const t=e.returnObject?a:S(a,e.itemValue),r=S(a,e.itemSelectable,!0);return{type:"item",value:t,selectable:r,raw:a}}function ke(e,a){const t=[];for(const r of a)t.push(he(e,r));return t}function De(e){return{items:l(()=>ke(e,e.items))}}const xe=b({search:String,loading:Boolean,...Y(),...be(),...se(),...ne(),...ue({itemsPerPage:5}),...ie(),...le(),...$(),...H(),...K({transition:{component:U,hideOnLeave:!0}})},"VDataIterator"),Te=Z()({name:"VDataIterator",props:xe(),emits:{"update:modelValue":e=>!0,"update:groupBy":e=>!0,"update:page":e=>!0,"update:itemsPerPage":e=>!0,"update:sortBy":e=>!0,"update:options":e=>!0,"update:expanded":e=>!0,"update:currentItems":e=>!0},setup(e,a){let{slots:t}=a;const r=_(e,"groupBy"),c=ee(e,"search"),{items:g}=De(e),{filteredItems:h}=te(e,g,c,{transform:o=>o.raw}),{sortBy:s,multiSort:k,mustSort:D}=me(e),{page:n,itemsPerPage:u}=de(e),{toggleSort:x}=ce({sortBy:s,multiSort:k,mustSort:D,page:n}),{sortByWithGroups:B,opened:V,extractRows:T,isGroupOpen:F,toggleGroup:G}=ge({groupBy:r,sortBy:s}),{sortedItems:O}=pe(e,h,B,{transform:o=>o.raw}),{flatItems:p}=ve(O,r,V),j=l(()=>p.value.length),{startIndex:w,stopIndex:A,pageCount:C,prevPage:E,nextPage:R,setItemsPerPage:L,setPage:M}=Pe({page:n,itemsPerPage:u,itemsLength:j}),{paginatedItems:m}=Ie({items:p,startIndex:w,stopIndex:A,itemsPerPage:u}),v=l(()=>T(m.value)),{isSelected:W,select:q,selectAll:z,toggleSelect:J}=fe(e,{allItems:g,currentPage:v}),{isExpanded:N,toggleExpand:Q}=ye(e);Se({page:n,itemsPerPage:u,sortBy:s,groupBy:r,search:c});const d=l(()=>({page:n.value,itemsPerPage:u.value,sortBy:s.value,pageCount:C.value,toggleSort:x,prevPage:E,nextPage:R,setPage:M,setItemsPerPage:L,isSelected:W,select:q,selectAll:z,toggleSelect:J,isExpanded:N,toggleExpand:Q,isGroupOpen:F,toggleGroup:G,items:v.value,groupedItems:m.value}));return ae(()=>i(e.tag,{class:["v-data-iterator",{"v-data-iterator--loading":e.loading},e.class],style:e.style},{default:()=>{var o,P;return[(o=t.header)==null?void 0:o.call(t,d.value),i(re,{transition:e.transition},{default:()=>{var I,f;return[e.loading?i(oe,{key:"loader",name:"v-data-iterator",active:!0},{default:X=>{var y;return(y=t.loader)==null?void 0:y.call(t,X)}}):i("div",{key:"items"},[m.value.length?(f=t.default)==null?void 0:f.call(t,d.value):(I=t["no-data"])==null?void 0:I.call(t)])]}}),(P=t.footer)==null?void 0:P.call(t,d.value)]}})),{}}});export{Te as V};
