import{a as U,L as B,r as m,t as g,v as F,z as e,A as l,V as N,M as a,N as L,O as C,B as _,y as q,P as w,Q as z,R as f,S as E}from"./CxCi84D5.js";import{u as R}from"./KKXyQTFi.js";import{V as $,a as O}from"./CNL2HLNc.js";import"./DugkJYux.js";import{V as T}from"./B_-zNqXP.js";import{V as I,a as p}from"./Dd-OUGDu.js";const M={class:"text-center"},X={__name:"ClientDialog",emits:["exitDialog"],setup(P,{emit:x}){const{$api:V}=U(),i=R(),r=B(),k=x,t=m({}),v=m(!1),u=m(!0),c=m(!1);function y(){u.value?D():h()}function b(){i.client.payload?(t.value=i.client.payload,u.value=!1):(t.value={},u.value=!0)}function d(){k("exitDialog"),c.value=!1,i.setClient({dialog:!1})}function A(){c.value?S():c.value=!0}const D=async()=>{try{const s=await V.post("/clients/",t.value);r.setAlert({show:!0,color:"success",content:"New Client Created!"}),d()}catch{r.setAlert({show:!0,color:"error",content:"Failed to create Client."})}},h=async()=>{try{const s=await V.put(`/clients/${t.value.id}`,t.value);r.setAlert({show:!0,color:"success",content:"Client Updated!"}),d()}catch{r.setAlert({show:!0,color:"error",content:"Failed to Update Client."})}},S=async()=>{try{const s=await V.delete(`/clients/${t.value.id}`);r.setAlert({show:!0,color:"success",content:"Client Deleted!"}),d()}catch{r.setAlert({show:!0,color:"error",content:"Failed to Delete Client."})}};return(s,o)=>(g(),F("div",M,[e(E,{modelValue:a(i).client.dialog,"onUpdate:modelValue":o[5]||(o[5]=n=>a(i).client.dialog=n),width:"auto",onAfterEnter:b,onAfterLeave:d},{default:l(()=>[e(N,{class:"px-5 pb-4",width:"700","max-width":"700","prepend-icon":"mdi-account",text:"",title:"Client Information",flat:""},{actions:l(()=>[a(u)?w("",!0):(g(),L(C,{key:0,class:"text-none",color:"red",size:"large",onClick:A,variant:"tonal"},{default:l(()=>[_(q(a(c)?"Click again to confirm":"Delete Client"),1)]),_:1})),e($),e(C,{class:"text-none",color:"red",size:"large",onClick:d,variant:"tonal"},{default:l(()=>[_(" Close ")]),_:1}),e(C,{class:"text-none",color:"blue",size:"large",onClick:y,variant:"tonal"},{default:l(()=>[_(" Submit ")]),_:1})]),default:l(()=>[w("",!0),e(T,{modelValue:a(v),"onUpdate:modelValue":o[4]||(o[4]=n=>z(v)?v.value=n:null)},{default:l(()=>[e(O,null,{default:l(()=>[e(I,null,{default:l(()=>[e(p,{cols:"12",md:"6"},{default:l(()=>[e(f,{modelValue:a(t).first_name,"onUpdate:modelValue":o[0]||(o[0]=n=>a(t).first_name=n),counter:10,label:"First name","hide-details":"",variant:"outlined",required:""},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"6"},{default:l(()=>[e(f,{modelValue:a(t).last_name,"onUpdate:modelValue":o[1]||(o[1]=n=>a(t).last_name=n),counter:10,label:"Last name","hide-details":"",variant:"outlined",required:""},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"6"},{default:l(()=>[e(f,{modelValue:a(t).email,"onUpdate:modelValue":o[2]||(o[2]=n=>a(t).email=n),label:"E-mail","hide-details":"",variant:"outlined",required:""},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"6"},{default:l(()=>[e(f,{modelValue:a(t).contact_number,"onUpdate:modelValue":o[3]||(o[3]=n=>a(t).contact_number=n),label:"Contact Number","hide-details":"",variant:"outlined",required:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]))}};export{X as _};
